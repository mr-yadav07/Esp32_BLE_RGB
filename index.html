<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>ESP32 Hybrid Control</title>
</head>
<body>

<button onclick="send(0x03)">ON</button>
<button onclick="send(0x09)">OFF</button>
<button onclick="send(0x05)">OK</button><br><br>

<button onclick="send(0x0D)">1</button>
<button onclick="send(0x19)">2</button>
<button onclick="send(0x1B)">3</button>
<button onclick="send(0x01)">4</button>
<button onclick="send(0x11)">5</button>
<button onclick="send(0x15)">6</button>

<script>
let device, writer;

async function connect() {
  device = await navigator.bluetooth.requestDevice({
    filters: [{ name: 'ESP32-HYBRID' }],
    optionalServices: ['00001101-0000-1000-8000-00805f9b34fb']
  });

  const server = await device.gatt.connect();
  const service = await server.getPrimaryService('00001101-0000-1000-8000-00805f9b34fb');
  const characteristic = await service.getCharacteristic('00001101-0000-1000-8000-00805f9b34fb');
  writer = characteristic;
}

function send(cmd) {
  if (!writer) return;
  writer.writeValue(Uint8Array.of(cmd));
}
</script>

<button onclick="connect()">Connect Bluetooth</button>

</body>
</html>